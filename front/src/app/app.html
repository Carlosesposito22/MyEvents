<div *ngIf="!router.url.startsWith('/graficos') && !router.url.startsWith('/consultas') && !router.url.startsWith('/dashboard'); else onlyDashboard" class="dashboard-container">

  <br/>
  <br/>

  <main class="dash-grid">

    <section class="dash-card">
      <div class="dash-card-header">
        <h3>Eventos</h3>
      </div>
      <div class="dash-card-body">
        <button class="dash-btn" (click)="abrirModal()">
          <span class="label-icon">ğŸ”</span> Buscar Evento (ID)
        </button>
        <button class="dash-btn" (click)="abrirModalBuscarTitulo()">
          <span class="label-icon">ğŸ” </span> Buscar Eventos por TÃ­tulo
        </button>
        <button class="dash-btn" (click)="abrirModalPorCategoria()">
          <span class="label-icon">ğŸ·ï¸</span> Buscar Eventos por Categoria
        </button>
        <button class="dash-btn" (click)="abrirModalPorData()">
          <span class="label-icon">ğŸ“…</span> Buscar Eventos por Data
        </button>
        <button class="dash-btn" (click)="abrirModalEditar()">
          <span class="label-icon">âœï¸</span> Editar Evento
        </button>
        <button class="dash-btn primary" (click)="abrirModalCriar()">
          <span class="label-icon">â•</span> Criar Novo Evento
        </button>
        <button class="dash-btn critical" (click)="abrirModalRemover()">
          Remover Evento
        </button>
      </div>
    </section>

    <section class="dash-card">
      <div class="dash-card-header">
        <h3>Categorias</h3>
      </div>
      <div class="dash-card-body">
        <button class="dash-btn" (click)="abrirModalBuscarCategoria()">
          <span class="label-icon">ğŸ”</span> Buscar Categoria (ID)
        </button>
        <button class="dash-btn" (click)="abrirModalBuscarNomeCategoria()">
          <span class="label-icon">ğŸ” </span> Buscar Categorias por Nome
        </button>
        <button class="dash-btn" (click)="abrirModalSubCategorias()">
          <span class="label-icon">ğŸ“‚</span> Buscar Subcategorias
        </button>
        <button class="dash-btn" (click)="abrirModalCategoriaHierarquia()">
          <span class="label-icon">ğŸ–ï¸</span> Ver Hierarquia de Categoria
        </button>
        <button class="dash-btn" (click)="abrirModalEditarCategoria()">
          <span class="label-icon">âœï¸</span> Editar Categoria
        </button>
        <button class="dash-btn primary" (click)="abrirModalCriarCategoria()">
          <span class="label-icon">â•</span> Criar Nova Categoria
        </button>
        <button class="dash-btn critical" (click)="abrirModalRemoverCategoria()">
          Remover Categoria
        </button>
      </div>
    </section>

    <section class="dash-card">
      <div class="dash-card-header">
        <h3>Atividades</h3>
      </div>
      <div class="dash-card-body">
        <button class="dash-btn" (click)="abrirModalBuscarAtividade()">
          <span class="label-icon">ğŸ”</span> Buscar Atividade (ID)
        </button>
        <button class="dash-btn" (click)="abrirModalBuscarAtividadePorTitulo()">
          <span class="label-icon">ğŸ” </span> Buscar Atividades por TÃ­tulo
        </button>
        <button class="dash-btn" (click)="abrirModalListarAtividadesEvento()">
          <span class="label-icon">âœ¨</span> Listar Atividades de um Evento
        </button>
        <button class="dash-btn" (click)="abrirModalEditarAtividade()">
          <span class="label-icon">âœï¸</span> Editar Atividade
        </button>
        <button class="dash-btn primary" (click)="abrirModalCriarAtividade()">
          <span class="label-icon">â•</span> Criar Nova Atividade
        </button>
        <button class="dash-btn critical" (click)="abrirModalRemoverAtividade()">
          Remover Atividade
        </button>
      </div>
    </section>

    <section class="dash-card">
      <div class="dash-card-header">
        <h3>Palestrantes</h3>
      </div>
      <div class="dash-card-body">
        <button class="dash-btn" (click)="abrirModalBuscarPalestrante()">
          <span class="label-icon">ğŸ”</span> Buscar Palestrante (ID)
        </button>
        <button class="dash-btn" (click)="abrirModalBuscarPalestrantePorNome()">
          <span class="label-icon">ğŸ” </span> Buscar Palestrantes por Nome
        </button>
        <button class="dash-btn" (click)="abrirModalEditarPalestrante()">
          <span class="label-icon">âœï¸</span> Editar Palestrante
        </button>
        <button class="dash-btn primary" (click)="abrirModalCriarPalestrante()">
          <span class="label-icon">â•</span> Criar Novo Palestrante
        </button>
        <button class="dash-btn critical" (click)="abrirModalRemoverPalestrante()">
          Remover Palestrante
        </button>
      </div>
    </section>

    <section class="dash-card dash-card-graficos" [routerLink]="['/graficos']">
      <div>
        <h3>ğŸ“Š GrÃ¡ficos & EstatÃ­sticas</h3>
        <p>Visualize relatÃ³rios de eventos e tendÃªncias.</p>
      </div>
      <span class="grafico-link">Acessar GrÃ¡ficos â”</span>
    </section>

    <section class="dash-card dash-card-graficos" style="background: linear-gradient(100deg, #226d44d8 0%, #226d44 100%);" [routerLink]="['/consultas']">
      <div>
        <h3>ğŸ’¾ Consultas & Views & Logs</h3>
        <p>Execute consultas complexas e acesse views do banco.</p>
      </div>
      <span class="grafico-link">Acessar Consultas â”</span>
    </section>

    <section class="dash-card dash-card-graficos" style="background: linear-gradient(100deg, #FFEF1F 0%, #FFEF00 100%);" [routerLink]="['/dashboard']">
      <div>
        <h3>ğŸ“Š Dashboard</h3>
        <p>Visualize mÃ©tricas e indicadores chave do sistema.</p>
      </div>
      <span class="grafico-link">Acessar Dashboard â”</span>
    </section>

  </main>

  <app-evento *ngIf="mostrarModal" (fechar)="fecharModal()"></app-evento>
  <app-eventos-por-categoria *ngIf="mostrarModalPorCategoria" (fechar)="fecharModalPorCategoria()"></app-eventos-por-categoria>
  <app-eventos-buscar *ngIf="mostrarModalBuscarTitulo" (fechar)="fecharModalBuscarTitulo()"></app-eventos-buscar>
  <app-eventos-por-data *ngIf="mostrarModalPorData" (fechar)="fecharModalPorData()"></app-eventos-por-data>
  <app-evento-criar *ngIf="mostrarModalCriar" (fechar)="fecharModalCriar()"></app-evento-criar>
  <app-evento-editar [open]="mostrarModalEditar" (fechar)="fecharModalEditar()"></app-evento-editar>
  <app-evento-remover *ngIf="mostrarModalRemover" (fechar)="fecharModalRemover()"></app-evento-remover>

  <app-create-categoria *ngIf="mostrarModalCriarCategoria" (fechar)="fecharModalCriarCategoria()"></app-create-categoria>
  <app-find-categoria *ngIf="mostrarModalBuscarCategoria" (fechar)="fecharModalBuscarCategoria()"></app-find-categoria>
  <app-update-categoria [open]="mostrarModalEditarCategoria" (fechar)="fecharModalEditarCategoria()"></app-update-categoria>
  <app-buscar-categoria *ngIf="mostrarModalBuscarNomeCategoria" (fechar)="fecharModalBuscarNomeCategoria()"></app-buscar-categoria>
  <app-buscar-subcategorias [open]="mostrarModalSubcategoriasAberto" (fechar)="fecharModalSubCategorias()"></app-buscar-subcategorias>
  <app-hierarquia-categorias [open]="mostrarModalCategoriaHierarquia" (fechar)="fecharModalCategoriaHierarquia()"></app-hierarquia-categorias>
  <app-delete-categoria *ngIf="mostrarModalRemoverCategoria" (fechar)="fecharModalRemoverCategoria()"></app-delete-categoria>

  <app-create-atividade *ngIf="mostrarModalCriarAtividade" (fechar)="fecharModalCriarAtividade()"></app-create-atividade>
  <app-buscar-atividade *ngIf="mostrarModalBuscarAtividadeTitulo" (fechar)="fecharModalBuscarAtividadePorTitulo()"></app-buscar-atividade>
  <app-get-atividade *ngIf="mostrarModalBuscarAtividade" (fechar)="fecharModalBuscarAtividade()"></app-get-atividade>
  <app-update-atividade [open]="mostrarModalEditarAtividade" (fechar)="fecharModalEditarAtividade()"></app-update-atividade>
  <app-delete-atividade *ngIf="mostrarModalRemoverAtividade" (fechar)="fecharModalRemoverAtividade()"></app-delete-atividade>
  <app-atividades-por-evento *ngIf="mostrarModalListarAtividadesEvento" (fechar)="fecharModalListarAtividadesEvento()"></app-atividades-por-evento>

  <app-get-palestrante *ngIf="mostrarModalBuscarPalestrante" (fechar)="fecharModalBuscarPalestrante()"></app-get-palestrante>
  <app-buscar-palestrante *ngIf="mostrarModalBuscarPalestranteNome" (fechar)="fecharModalBuscarPalestrantePorNome()"></app-buscar-palestrante>
  <app-create-palestrante *ngIf="mostrarModalCriarPalestrante" (fechar)="fecharModalCriarPalestrante()"></app-create-palestrante>
  <app-update-palestrante [open]="mostrarModalEditarPalestrante" (fechar)="fecharModalEditarPalestrante()"></app-update-palestrante>
  <app-delete-palestrante *ngIf="mostrarModalRemoverPalestrante" (fechar)="fecharModalRemoverPalestrante()"></app-delete-palestrante>

</div>

<ng-template #onlyDashboard>
  <router-outlet></router-outlet>
</ng-template>

<style>
  /* --- Reseta o fundo da pÃ¡gina --- */
  :host {
    display: block;
    background-color: #f4f7fa; /* Fundo neutro da dashboard */
    min-height: 100vh;
  }

  /* --- Container Principal --- */
  .dashboard-container {
    width: 100%;
    min-height: 100vh;
    background-color: #f4f7fa;
    animation: fadeInMain 0.4s ease-out;
  }

  @keyframes fadeInMain {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* --- CabeÃ§alho da PÃ¡gina --- */
  .dash-header {
    background: #ffffff;
    padding: 24px 40px;
    border-bottom: 1px solid #e9ecef;
    margin-bottom: 32px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
  }
  .dash-header h1 {
    margin: 0;
    font-size: 1.8rem;
    font-weight: 700;
    color: #212529;
  }
  .dash-header p {
    margin: 4px 0 0;
    font-size: 1rem;
    color: #6c757d;
  }

  .dash-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 24px;
    padding: 0 40px 40px;
  }

  .dash-card {
    background: #ffffff;
    border-radius: 12px;
    border: 1px solid #e9ecef;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
    display: flex;
    flex-direction: column;
    min-height: 400px; /* Altura mÃ­nima para alinhamento */
  }
  .dash-btn:hover {
    background-color: #f8f9fa;
    border-color: #b3bdc6;
    transform: translateY(-2px); /* <-- ADICIONADO */
    box-shadow: 0 4px 8px rgba(0,0,0,0.06); /* <-- ADICIONADO */
  }

  .dash-card-header {
    padding: 20px 24px;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }
  .dash-card-header .dash-icon {
    font-size: 1.25rem;
  }
  .dash-card-header h3 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: #343a40;
  }

  .dash-card-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex-grow: 1; /* Faz o corpo crescer para preencher o min-height */
  }

  .dash-card-graficos {
    grid-column: 1 / -1;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    min-height: auto; /* Remove altura mÃ­nima */
    padding: 28px 32px;
    background: linear-gradient(100deg, #007bff 0%, #0056b3 100%);
    color: #fff;
    cursor: pointer;
  }
  .dash-card-graficos:hover {
    box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
    transform: translateY(-3px);
  }
  .dash-card-graficos h3 {
    color: #fff;
    margin: 0;
    font-size: 1.5rem;
  }
  .dash-card-graficos p {
    margin: 0;
    font-size: 1rem;
    opacity: 0.9;
  }
  .dash-card-graficos .grafico-link {
    font-weight: 700;
    font-size: 1.1rem;
    opacity: 0.9;
    transition: opacity 0.2s;
  }
  .dash-card-graficos:hover .grafico-link {
    opacity: 1;
  }

  .dash-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 11px 16px;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    font-family: inherit;
  }
  .dash-btn .label-icon {
    font-size: 1.1em;
    opacity: 0.8;
  }

  .dash-btn {
    background-color: #fff;
    border: 1px solid #ced4da; /* Borda cinza */
    color: #212529;
  }
  .dash-btn:hover {
    background-color: #f8f9fa; /* Fundo levemente cinza ao pairar */
    border-color: #b3bdc6;
  }
  .dash-btn:active {
    transform: scale(0.98);
    background-color: #f1f3f5;
  }

  /* --- BotÃ£o PrimÃ¡rio (Azul - para "Criar") --- */
  .dash-btn.primary {
    background-color: #007bff; /* Azul primÃ¡rio */
    border: 1px solid #007bff;
    color: #fff;
  }
  .dash-btn.primary:hover {
    background-color: #0069d9;
    border-color: #0062cc;
  }
  .dash-btn.primary .label-icon {
    opacity: 1;
  }
  .dash-btn.primary .new-badge {
      /* Oculta o 'new-badge' antigo, o prÃ³prio botÃ£o jÃ¡ Ã© o destaque */
    display: none;
  }

  /* --- BotÃ£o CrÃ­tico (Vermelho - para "Remover") --- */
  .dash-btn.critical {
    background-color: #dc3545; /* Vermelho perigo */
    border: 1px solid #dc3545;
    color: #fff;
  }
  .dash-btn.critical:hover {
    background-color: #c82333;
    border-color: #bd2130;
  }
  .dash-btn.critical:before { /* MantÃ©m o Ã­cone de perigo */
    content: "ğŸ—‘ï¸"; /* Atualizado para um Ã­cone mais claro */
    font-size: 1.1em;
    margin-right: 4px;
  }

</style>
