<div class="modal-overlay" (click)="!resultado && fechar.emit()">
  <div class="modal-content animate-scale" (click)="$event.stopPropagation()">

    <!-- Bot√£o fechar e t√≠tulo s√≥ aparecem se N√ÉO tiver resultado -->
    <ng-container *ngIf="!resultado; else sucessoCriado">
      <button class="modal-close" (click)="fechar.emit()">‚úñ</button>
      <h2 class="titulo-pagina">üÜï Criar Evento</h2>

      <!-- FORMUL√ÅRIO -->
      <form (ngSubmit)="criarEvento()" #eventoForm="ngForm" autocomplete="off">
        <div class="evento-form-row" style="flex-direction: column; gap: 16px;">
          <input type="text" [(ngModel)]="evento.titulo" name="titulo" placeholder="T√≠tulo" required class="evento-input"/>
          <div style="display: flex; gap: 10px;">
            <input type="date" [(ngModel)]="evento.data_inicio" name="data_inicio" placeholder="Data In√≠cio" required class="evento-input"/>
            <input type="date" [(ngModel)]="evento.data_fim" name="data_fim" placeholder="Data Fim" required class="evento-input"/>
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="number" [(ngModel)]="evento.carga_horaria" name="carga_horaria" placeholder="Carga Hor√°ria" required class="evento-input"/>
            <input type="number" [(ngModel)]="evento.limite_participantes" name="limite_participantes" placeholder="Limite Participantes" required class="evento-input"/>
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="number" [(ngModel)]="evento.expectativa_participantes" name="expectativa_participantes" placeholder="Expectativa Participantes" required class="evento-input"/>
            <input type="number" [(ngModel)]="evento.numero_participantes" name="numero_participantes" placeholder="N√∫mero Participantes" required class="evento-input"/>
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="number" [(ngModel)]="evento.id_categoria" name="id_categoria" placeholder="ID Categoria" required class="evento-input"/>
            <input type="number" [(ngModel)]="evento.numero_membros_comissao" name="numero_membros_comissao" placeholder="N¬∫ Membros Comiss√£o" required class="evento-input"/>
          </div>
          <input type="email" [(ngModel)]="evento.email_duvidas" name="email_duvidas" placeholder="Email D√∫vidas" required class="evento-input"/>
        </div>
        <div class="modal-footer">
          <button class="evento-btn" [disabled]="loading || eventoForm.invalid" type="submit">
            {{ loading ? 'Enviando...' : 'Criar Evento' }}
          </button>
        </div>
      </form>
      <div *ngIf="loading" class="loading" style="justify-content:center;">
        <span class="spinner"></span> Enviando evento...
      </div>
      <div *ngIf="error && !loading" class="evento-erro">
        ‚ö†Ô∏è {{ error }}
      </div>
    </ng-container>

    <!-- Sucesso -->
    <ng-template #sucessoCriado>
      <div class="evento-criado-final" style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;">
        <div style="font-size:2.7rem; color:#16a34a; margin-bottom:10px; animation: popscale 0.18s;">
          üéâ
        </div>
        <div style="font-size:2rem;font-weight:800;color:#0084ff; margin-bottom:22px; text-align:center;">
          Evento criado com sucesso!
        </div>
        <button class="evento-btn" style="margin-top:0;min-width:120px;" (click)="fechar.emit()">Fechar</button>
      </div>
    </ng-template>

  </div>
</div>

<style>
  @keyframes popscale {
    from { transform: scale(0.7); opacity:0.2;}
    to { transform: scale(1); opacity:1;}
  }
</style>
